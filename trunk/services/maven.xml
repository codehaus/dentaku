<project default="dentaku-dist" xmlns:m="jelly:maven">

    <goal name="dentaku-dist">
        <attainGoal name="ejb:install"/>
    </goal>
    <preGoal name="test:compile">
        <path id="gentaku.task.classpath">
            <path refid="maven.dependency.classpath"/>
        </path>
        <taskdef name="gentaku" classname="org.dentaku.gentaku.ant.GentakuTask" classpathref="gentaku.task.classpath"/>
        <gentaku model="${basedir}/src/test/org/dentaku/services/persistence/synthetic/TestModel.xml.zip">
            <component classname="org.dentaku.gentaku.cartridge.entity.EntityBasePlugin" destdir="${dentaku.test.src}"/>
            <component classname="org.dentaku.gentaku.cartridge.entity.EntityPlugin" destdir="${dentaku.test.src}"/>
            <component classname="org.dentaku.gentaku.cartridge.entity.EntityFactoryPlugin" destdir="${dentaku.test.src}"/>
            <component classname="org.dentaku.gentaku.cartridge.entity.PlexusEntityFactoryConfiguration" destdir="${dentaku.test.src}/META-INF/plexus" destinationfilename="components.xml"/>
        </gentaku>
    </preGoal>
</project>